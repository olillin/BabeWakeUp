<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babe wake up</title>
    <link rel="stylesheet" href="style.css">
    <script src="/wake.js"></script>
</head>

<body>
    <button onclick="wake()" id="wake" disabled>
        <img alt="Loading..." id="stateImage">
        <script>
            function refreshAwake() {
                if (currentState == undefined || currentState === 'AWAKE' || currentState === 'SLEEPING') {
                    isAwake().then(awake => {
                        console.log('Checking if computer is awake...')
                        if (currentState == undefined || currentState === 'AWAKE' || currentState === 'SLEEPING') {
                            setState(awake ? 'AWAKE' : 'SLEEPING')
                        }
                    })
                }
            }

            refreshAwake()
            window.addEventListener('focus', refreshAwake)
        </script>
    </button>
</body>

</html>